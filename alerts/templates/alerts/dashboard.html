{% extends 'alerts/base.html' %}

{% block content %}
<!-- Statistics Cards -->
<div class="stats">
    <div class="stat-card">
        <div class="stat-value">{{ total_alerts }}</div>
        <div class="stat-label">Total Alerts</div>
    </div>
    <div class="stat-card">
        <div class="stat-value">{{ critical_alerts }}</div>
        <div class="stat-label">Critical Alerts</div>
    </div>
    <div class="stat-card">
        <div class="stat-value">{{ active_trucks }}</div>
        <div class="stat-label">Active Trucks</div>
    </div>
</div>

<!-- Filter Controls (using Alpine.js for state) -->
<div x-data="{ priority: 'all' }">
    <div class="filters">
        <label for="priority-filter">
            <strong>Filter by Priority:</strong>
        </label>
        <select id="priority-filter"
                x-model="priority" 
                hx-get="/htmx/alerts/" 
                hx-trigger="change"
                hx-target="#alert-feed"
                hx-swap="innerHTML"
                name="priority">
            <option value="all">All Alerts</option>
            <option value="critical">Critical Only</option>
            <option value="standard">Standard Only</option>
        </select>
        
        <button class="btn-refresh"
                hx-get="/htmx/alerts/" 
                hx-target="#alert-feed"
                hx-swap="innerHTML">
            ðŸ”„ Refresh Now
        </button>
        
        <span style="margin-left: auto; color: #999; font-size: 13px;">
            Auto-refreshes every 10 seconds
        </span>
    </div>
    
    <!-- Alert Feed (HTMX powered) -->
    <div id="alert-feed" 
         hx-get="/htmx/alerts/" 
         hx-trigger="load, every 10s"
         hx-swap="innerHTML">
        <div class="loading">Loading alerts...</div>
    </div>
</div>
{% endblock %}